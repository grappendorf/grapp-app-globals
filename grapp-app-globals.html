 
<!--
Copyright (c) 2014 Dirk Grappendorf, www.grappendorf.net. All rights reserved.
This code may only be used under the MIT style license found in the file LICENSE.txt.

Element: grapp-app-globals
Version: 0.0.3
Description: A web component for setting/getting global values
-->


<link href="../polymer/polymer.html" rel="import">

<polymer-element name="grapp-app-globals">

<script type="text/javascript">(function() {
  var instances, values;

  instances = [];

  values = {};

  Polymer('grapp-app-globals', {
    computed: {},
    detached: function() {
      return instances.splice(instances.indexOf(this), 1);
    },
    ready: function() {
      var globalValue, instance, _i, _j, _len, _len1, _ref, _results;
      instances.push(this);
      _ref = this.querySelectorAll('grapp-app-global-value');
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        globalValue = _ref[_i];
        if (globalValue.hasAttribute('value')) {
          values[globalValue.getAttribute('name')] = globalValue.getAttribute('value');
        } else {
          values[globalValue.getAttribute('name')] = globalValue.textContent;
        }
      }
      _results = [];
      for (_j = 0, _len1 = instances.length; _j < _len1; _j++) {
        instance = instances[_j];
        _results.push(instance.updateValues());
      }
      return _results;
    },
    updateValues: function() {
      var key, value, _results;
      _results = [];
      for (key in values) {
        value = values[key];
        if (/\{\{(.+)\}\}/.test(value)) {
          _results.push(this.computed[key] = value.slice(2, -2));
        } else {
          _results.push(this[key] = value);
        }
      }
      return _results;
    }
  });

}).call(this);
</script>

</polymer-element>

<polymer-element name="grapp-app-global-value" noscript attributes="name value">
</polymer-element>

